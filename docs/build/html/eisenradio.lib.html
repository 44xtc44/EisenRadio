<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>eisenradio.lib package &mdash; EisenRadio  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css-style.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> EisenRadio
            <img src="_static/aircraft_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Technical Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Feature Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="indexStructure.html">main page &lt;div&gt; and JS load order</a></li>
<li class="toctree-l1"><a class="reference internal" href="sketch.html">technical sketch</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipInstall.html">pip install</a></li>
<li class="toctree-l1"><a class="reference internal" href="knownProblems.html">known problems</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">EisenRadio</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>eisenradio.lib package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/eisenradio.lib.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="eisenradio-lib-package">
<h1>eisenradio.lib package<a class="headerlink" href="#eisenradio-lib-package" title="Permalink to this heading"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this heading"></a></h2>
</section>
<section id="module-eisenradio.lib.eisdb">
<span id="eisenradio-lib-eisdb-module"></span><h2>eisenradio.lib.eisdb module<a class="headerlink" href="#module-eisenradio.lib.eisdb" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.eisdb.db_get_id_from_name">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.eisdb.</span></span><span class="sig-name descname"><span class="pre">db_get_id_from_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">radio_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.eisdb.db_get_id_from_name" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.eisdb.delete_db">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.eisdb.</span></span><span class="sig-name descname"><span class="pre">delete_db</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.eisdb.delete_db" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.eisdb.delete_radio">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.eisdb.</span></span><span class="sig-name descname"><span class="pre">delete_radio</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">radio_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.eisdb.delete_radio" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.eisdb.enum_radios">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.eisdb.</span></span><span class="sig-name descname"><span class="pre">enum_radios</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.eisdb.enum_radios" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.eisdb.get_db_connection">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.eisdb.</span></span><span class="sig-name descname"><span class="pre">get_db_connection</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.eisdb.get_db_connection" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.eisdb.get_db_path">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.eisdb.</span></span><span class="sig-name descname"><span class="pre">get_db_path</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.eisdb.get_db_path" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.eisdb.get_db_smaller">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.eisdb.</span></span><span class="sig-name descname"><span class="pre">get_db_smaller</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.eisdb.get_db_smaller" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.eisdb.get_download_dir">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.eisdb.</span></span><span class="sig-name descname"><span class="pre">get_download_dir</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.eisdb.get_download_dir" title="Permalink to this definition"></a></dt>
<dd><p>return download dir, return None if db is empty</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.eisdb.get_post">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.eisdb.</span></span><span class="sig-name descname"><span class="pre">get_post</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">post_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.eisdb.get_post" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.eisdb.install_new_db">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.eisdb.</span></span><span class="sig-name descname"><span class="pre">install_new_db</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.eisdb.install_new_db" title="Permalink to this definition"></a></dt>
<dd><p>make db from schema</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.eisdb.render_picture">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.eisdb.</span></span><span class="sig-name descname"><span class="pre">render_picture</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">byte_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">de_enc</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.eisdb.render_picture" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.eisdb.status_read_status_set">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.eisdb.</span></span><span class="sig-name descname"><span class="pre">status_read_status_set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">set_status</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.eisdb.status_read_status_set" title="Permalink to this definition"></a></dt>
<dd><p>return value of db or set a value in db</p>
<p>helper function for often used queries
can only set values in eisen_intern table</p>
</dd></dl>

</section>
<section id="module-eisenradio.lib.ghetto_blacklist">
<span id="eisenradio-lib-ghetto-blacklist-module"></span><h2>eisenradio.lib.ghetto_blacklist module<a class="headerlink" href="#module-eisenradio.lib.ghetto_blacklist" title="Permalink to this heading"></a></h2>
<dl class="simple">
<dt>update a json dict file in intervals, like the eisenradio database</dt><dd><p>start_ghetto_blacklist_writer_daemon() - run the thread for writing blacklists
run_blacklist_writer()                 - loop to run ‘update_radios_blacklists()’
update_radios_blacklists()             - read blacklist file and update it if recorder got a new title
skipped_in_session(radio)              - recorder refused to write blacklisted titles n-times</p>
</dd>
</dl>
<p>interval of reading:     “recorder_new_title_dict[str_radio]” where recorder writes EVERY new title and
recorder compare it with “ghettoApi.all_blacklists_dict[str_radio]”
if new title is not found in ‘all_blacklists_dict’ on api, append title and dump the whole dict to disk
if a title is 3min long, dump all 3min</p>
<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_blacklist.run_blacklist_writer">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_blacklist.</span></span><span class="sig-name descname"><span class="pre">run_blacklist_writer</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_blacklist.run_blacklist_writer" title="Permalink to this definition"></a></dt>
<dd><p>loop, read “recorder_new_title_dict” in api and update json dict file for next session plus
“ghettoApi.all_blacklists_dict[str_radio]”</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_blacklist.skipped_in_session">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_blacklist.</span></span><span class="sig-name descname"><span class="pre">skipped_in_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">radio</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_blacklist.skipped_in_session" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_blacklist.start_ghetto_blacklist_writer_daemon">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_blacklist.</span></span><span class="sig-name descname"><span class="pre">start_ghetto_blacklist_writer_daemon</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_blacklist.start_ghetto_blacklist_writer_daemon" title="Permalink to this definition"></a></dt>
<dd><p>get called to start a thread, “run_blacklist_writer()” runs until the end of app</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_blacklist.update_radios_blacklists">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_blacklist.</span></span><span class="sig-name descname"><span class="pre">update_radios_blacklists</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_blacklist.update_radios_blacklists" title="Permalink to this definition"></a></dt>
<dd><ul class="simple">
<li><p>recorder_new_title_dict {radio(n): title}</p></li>
<li><p>all_blacklists_dict {radio(n): [blacklist]}</p></li>
</ul>
<p>recorder file dict :    recorder_new_title_dict[‘radio5’] = ‘ASAP - I want to be part of the blacklist’
recorder compares:          all_blacklists_dict[‘radio5’] = [‘The Listies - I am on a list’, ‘OMG - Mee Too’]
comparison
blacklist_writer: (is recorder_new_title_dict[‘radio5’] in all_blacklists_dict[‘radio5’] , table)
write
blacklist_writer: all_blacklists_dict[‘radio5’].append(recorder_new_title_dict[‘radio5’])</p>
</dd></dl>

</section>
<section id="module-eisenradio.lib.ghetto_container">
<span id="eisenradio-lib-ghetto-container-module"></span><h2>eisenradio.lib.ghetto_container module<a class="headerlink" href="#module-eisenradio.lib.ghetto_container" title="Permalink to this heading"></a></h2>
<p>helper for python package to container, to user deployment
this module hits, if the user calls the container
docker container
snap container, snapcraft setup for linux</p>
<section id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>container_setup_use()                        - if a container set record parent dir for Snap or Docker
container_parent_dir(container)              - called by ‘container_setup_use()’
container_copy_settings(source_ini, dst_ini) - called by ‘container_setup_use()’ copy ‘settings.ini’ to parent dir</p>
</div></blockquote>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_container.container_copy_settings">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_container.</span></span><span class="sig-name descname"><span class="pre">container_copy_settings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source_ini</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst_ini</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_container.container_copy_settings" title="Permalink to this definition"></a></dt>
<dd><p>copy settings.ini from package container to
snap user home/GhettoRecorder or
docker tmp/GhettoRecorder
never overwrite a user customized settings.ini</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_container.container_parent_dir">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_container.</span></span><span class="sig-name descname"><span class="pre">container_parent_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">container</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_container.container_parent_dir" title="Permalink to this definition"></a></dt>
<dd><p>get user: create dir under home folder for snap
create parent record folder
write new path
update radio_base_dir in GIni (central update point for default path in terminal mode)
copy settings.ini to that folder</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_container.container_setup_use">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_container.</span></span><span class="sig-name descname"><span class="pre">container_setup_use</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_container.container_setup_use" title="Permalink to this definition"></a></dt>
<dd><p>prepare containerized GhettoRecorder package for usage
change the default parent record path
copy settings.ini to that location</p>
</dd></dl>

</section>
<section id="module-eisenradio.lib.ghetto_http_srv">
<span id="eisenradio-lib-ghetto-http-srv-module"></span><h2>eisenradio.lib.ghetto_http_srv module<a class="headerlink" href="#module-eisenradio.lib.ghetto_http_srv" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_http_srv.TerminalRequestHandler">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_http_srv.</span></span><span class="sig-name descname"><span class="pre">TerminalRequestHandler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">directory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_http_srv.TerminalRequestHandler" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleHTTPRequestHandler</span></code></p>
<p>tiny http server for command line, local data feed, run on localhost network
showcase target:</p>
<blockquote>
<div><p>send any stream to a localhost port, buffer copy, content_type must be set, could be video (raw stream of jpeg)
only one instance per port
queue too small leads to short stops, too big to connection delay (time to fill the buffer, queue)</p>
</div></blockquote>
<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_http_srv.TerminalRequestHandler.content_type">
<span class="sig-name descname"><span class="pre">content_type</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'audio/mpeg'</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_http_srv.TerminalRequestHandler.content_type" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_http_srv.TerminalRequestHandler.do_GET">
<span class="sig-name descname"><span class="pre">do_GET</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_http_srv.TerminalRequestHandler.do_GET" title="Permalink to this definition"></a></dt>
<dd><p>Serve a GET request.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_http_srv.TerminalRequestHandler.fifo_http_chunk_queue">
<span class="sig-name descname"><span class="pre">fifo_http_chunk_queue</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;queue.Queue</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_http_srv.TerminalRequestHandler.fifo_http_chunk_queue" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_http_srv.TerminalRequestHandler.port">
<span class="sig-name descname"><span class="pre">port</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_http_srv.TerminalRequestHandler.port" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-eisenradio.lib.ghetto_ini">
<span id="eisenradio-lib-ghetto-ini-module"></span><h2>eisenradio.lib.ghetto_ini module<a class="headerlink" href="#module-eisenradio.lib.ghetto_ini" title="Permalink to this heading"></a></h2>
<p>GhettoRecorder config
settings.ini file</p>
<dl class="py class">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_ini.GIni">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_ini.</span></span><span class="sig-name descname"><span class="pre">GIni</span></span><a class="headerlink" href="#eisenradio.lib.ghetto_ini.GIni" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>config file for command line ‘settings.ini’</p>
<p>choice of radios can be made via list index number or name of the radio
Dictionaries:</p>
<blockquote>
<div><p>radio_names_list = []  : list to search radio name via character
radio_names_dict = {}  : digits used, read the dict key to get index value {radio_names_list[index]: radio name}</p>
<p>radio_base_dir                : recorder parent dir
settings_path                 : full path name of config file
settings_dir                  : dir path of config file
config_stations = {}          : radio, url pairs from [STATIONS] section
config_global = {}            : extra infos from [GLOBAL] section, SAVE_TO_DIR = f:, BLACKLIST_ENABLE = True
global_custom_path = “”       : custom parent directory for records elsewhere
global_custom_blacklist = “”  : blacklist feature on/off</p>
</div></blockquote>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">show_items_ini_file()</span> <span class="pre">-</span> <span class="pre">show</span> <span class="pre">the</span> <span class="pre">content</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">ini</span> <span class="pre">file</span> <span class="pre">to</span> <span class="pre">choose</span> <span class="pre">from,</span> <span class="pre">fill</span> <span class="pre">radio_names_list,radio_names_dict</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">record_path_test()</span>&#160;&#160;&#160; <span class="pre">-</span> <span class="pre">look</span> <span class="pre">if</span> <span class="pre">we</span> <span class="pre">can</span> <span class="pre">read</span> <span class="pre">the</span> <span class="pre">config</span> <span class="pre">file</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">global_config_get(print_config=False)</span> <span class="pre">-</span> <span class="pre">extract</span> <span class="pre">GLOBAL</span> <span class="pre">section</span> <span class="pre">from</span> <span class="pre">settings.ini</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">global_record_path_write(custom_path)</span> <span class="pre">-</span> <span class="pre">SAVE_TO_DIR</span> <span class="pre">=</span> <span class="pre">f</span></span></dt>
<dd><p>/2</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">global_blacklist_enable_write(option)</span> <span class="pre">-</span> <span class="pre">BLACKLIST_ENABLE</span> <span class="pre">=</span> <span class="pre">True</span></span></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_ini.GIni.config_global">
<span class="sig-name descname"><span class="pre">config_global</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_ini.GIni.config_global" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_ini.GIni.config_path_write">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">config_path_write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">custom_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_ini.GIni.config_path_write" title="Permalink to this definition"></a></dt>
<dd><p>find settings.ini and blacklist.json
write the path variables
used, if files are not in the same folder as the main module (ghetto_recorder)
Menu, ‘Set path to config, settings.ini’</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_ini.GIni.config_stations">
<span class="sig-name descname"><span class="pre">config_stations</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_ini.GIni.config_stations" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_ini.GIni.global_blacklist_enable_write">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">global_blacklist_enable_write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">option</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_ini.GIni.global_blacklist_enable_write" title="Permalink to this definition"></a></dt>
<dd><p>ini config write
[“GLOBAL”]
BLACKLIST_ENABLE = True</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_ini.GIni.global_config_get">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">global_config_get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">print_config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_ini.GIni.global_config_get" title="Permalink to this definition"></a></dt>
<dd><p>extract GLOBAL section from settings.ini, if available
GLOBAL can be: not there, empty, or with values (test case)</p>
<dl class="simple">
<dt>Method:</dt><dd><p>GIni.record_path_test() - exit if no path</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>show that there is no config</strong><strong>, </strong><strong>but can proceed without</strong><strong> (</strong><strong>GIni.record_path_test</strong><strong>(</strong><strong>)</strong><strong>, </strong><strong>ok</strong><strong>)</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_ini.GIni.global_custom_blacklist">
<span class="sig-name descname"><span class="pre">global_custom_blacklist</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_ini.GIni.global_custom_blacklist" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_ini.GIni.global_custom_path">
<span class="sig-name descname"><span class="pre">global_custom_path</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_ini.GIni.global_custom_path" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_ini.GIni.global_record_path_write">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">global_record_path_write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">custom_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_ini.GIni.global_record_path_write" title="Permalink to this definition"></a></dt>
<dd><p>ini config write
[“GLOBAL”]
SAVE_TO_DIR = f:/2</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_ini.GIni.radio_base_dir">
<span class="sig-name descname"><span class="pre">radio_base_dir</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'C:\\Users\\rene_\\PycharmProjects\\eisenradio_dev\\eisenradio\\lib\\radiostations'</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_ini.GIni.radio_base_dir" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_ini.GIni.radio_names_dict">
<span class="sig-name descname"><span class="pre">radio_names_dict</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_ini.GIni.radio_names_dict" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_ini.GIni.radio_names_list">
<span class="sig-name descname"><span class="pre">radio_names_list</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[]</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_ini.GIni.radio_names_list" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_ini.GIni.record_path_test">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">record_path_test</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_ini.GIni.record_path_test" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_ini.GIni.settings_dir">
<span class="sig-name descname"><span class="pre">settings_dir</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'C:\\Users\\rene_\\PycharmProjects\\eisenradio_dev\\eisenradio\\lib'</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_ini.GIni.settings_dir" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_ini.GIni.settings_path">
<span class="sig-name descname"><span class="pre">settings_path</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'C:\\Users\\rene_\\PycharmProjects\\eisenradio_dev\\eisenradio\\lib\\settings.ini'</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_ini.GIni.settings_path" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_ini.GIni.show_items_ini_file">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">show_items_ini_file</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_ini.GIni.show_items_ini_file" title="Permalink to this definition"></a></dt>
<dd><p>show the content of the ini file to choose from
fill radio_names_list and radio_names_dict to later validate the choice</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-eisenradio.lib.ghetto_menu">
<span id="eisenradio-lib-ghetto-menu-module"></span><h2>eisenradio.lib.ghetto_menu module<a class="headerlink" href="#module-eisenradio.lib.ghetto_menu" title="Permalink to this heading"></a></h2>
<dl class="simple">
<dt>GhettoRecorder command line menu display,</dt><dd><p>1: ‘record’,
2: ‘Change parent record path’,
3: ‘Enable/disable blacklists’,</p>
</dd>
</dl>
<p>settings.ini:
[GLOBAL]
SAVE_TO_DIR = f:
BLACKLIST_ENABLE = true
[STATIONS]
classic = <a class="reference external" href="http://37.251.146.169:8000/streamHD">http://37.251.146.169:8000/streamHD</a></p>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">menu_main()</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">-</span> <span class="pre">main</span> <span class="pre">menu</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">menu_path()</span>&#160;&#160;&#160;&#160;&#160; <span class="pre">-</span> <span class="pre">store</span> <span class="pre">custom</span> <span class="pre">path</span> <span class="pre">in</span> <span class="pre">config,</span> <span class="pre">default</span> <span class="pre">is</span> <span class="pre">recorder</span> <span class="pre">parent</span> <span class="pre">dir</span> <span class="pre">in</span> <span class="pre">config</span> <span class="pre">file</span> <span class="pre">folder</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">menu_blacklist()</span> <span class="pre">-</span> <span class="pre">enable</span> <span class="pre">blacklist</span> <span class="pre">feature,</span> <span class="pre">store</span> <span class="pre">in</span> <span class="pre">config</span> <span class="pre">and</span> <span class="pre">create</span> <span class="pre">json</span> <span class="pre">dict</span> <span class="pre">file</span> <span class="pre">if</span> <span class="pre">not</span> <span class="pre">exists</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">record()</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">-</span> <span class="pre">init</span> <span class="pre">all</span> <span class="pre">dicts</span> <span class="pre">in</span> <span class="pre">ghetto_ini.GIni,</span> <span class="pre">show</span> <span class="pre">the</span> <span class="pre">list</span> <span class="pre">of</span> <span class="pre">radios</span> <span class="pre">to</span> <span class="pre">choose</span> <span class="pre">from</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">record_read_radios()</span> <span class="pre">-</span> <span class="pre">input</span> <span class="pre">prompt,</span> <span class="pre">get</span> <span class="pre">radio</span> <span class="pre">name</span> <span class="pre">or</span> <span class="pre">the</span> <span class="pre">choice</span> <span class="pre">(index)</span> <span class="pre">number</span> <span class="pre">of</span> <span class="pre">a</span> <span class="pre">radio</span> <span class="pre">list,</span> <span class="pre">create</span> <span class="pre">folder</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">record_validate_input(radio_name)</span> <span class="pre">-</span> <span class="pre">True</span> <span class="pre">if</span> <span class="pre">choice</span> <span class="pre">in</span> <span class="pre">list,</span> <span class="pre">True</span> <span class="pre">if</span> <span class="pre">index</span> <span class="pre">of</span> <span class="pre">list</span> <span class="pre">is</span> <span class="pre">valid,</span> <span class="pre">False</span> <span class="pre">if</span> <span class="pre">not</span> <span class="pre">valid</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">record_validate_radio_name(radio_name)</span> <span class="pre">-</span> <span class="pre">change</span> <span class="pre">the</span> <span class="pre">index</span> <span class="pre">number</span> <span class="pre">back</span> <span class="pre">to</span> <span class="pre">radio</span> <span class="pre">name,</span> <span class="pre">if</span> <span class="pre">index</span> <span class="pre">was</span> <span class="pre">the</span> <span class="pre">choice</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">record_create_radio_url_dict(radio_name)</span> <span class="pre">-</span> <span class="pre">need</span> <span class="pre">radio</span> <span class="pre">name</span> <span class="pre">as</span> <span class="pre">thread</span> <span class="pre">and</span> <span class="pre">folder</span> <span class="pre">name,</span> <span class="pre">url</span> <span class="pre">to</span> <span class="pre">connect</span> <span class="pre">to</span> <span class="pre">network</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">record_create_folder_radio_name(radio_name)</span> <span class="pre">-</span> <span class="pre">create</span> <span class="pre">parent</span> <span class="pre">folder</span> <span class="pre">and</span> <span class="pre">radio</span> <span class="pre">child</span> <span class="pre">folder</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">terminal_record_parent_dir_get()</span>&#160; <span class="pre">-</span> <span class="pre">return</span> <span class="pre">GIni.radio_base_dir,</span> <span class="pre">parent</span> <span class="pre">folder</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">terminal_record_custom_path_get()</span> <span class="pre">-</span> <span class="pre">called</span> <span class="pre">by</span> <span class="pre">ghetto_recorder</span> <span class="pre">module,</span> <span class="pre">config</span> <span class="pre">is</span> <span class="pre">called</span> <span class="pre">at</span> <span class="pre">radio</span> <span class="pre">choice</span> <span class="pre">in</span> <span class="pre">main</span> <span class="pre">menu</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">terminal_record_blacklist_enabled_get()</span> <span class="pre">-</span> <span class="pre">called</span> <span class="pre">by</span> <span class="pre">ghetto_recorder</span> <span class="pre">module,</span> <span class="pre">enable</span> <span class="pre">api</span> <span class="pre">variable</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">terminal_record_settings_dir_get()</span> <span class="pre">-</span> <span class="pre">called</span> <span class="pre">by</span> <span class="pre">ghetto_recorder</span> <span class="pre">module</span> <span class="pre">to</span> <span class="pre">write</span> <span class="pre">blacklist</span> <span class="pre">beside</span> <span class="pre">settings.ini</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">terminal_record_all_radios_get()</span> <span class="pre">-</span> <span class="pre">called</span> <span class="pre">by</span> <span class="pre">ghetto_recorder</span> <span class="pre">module</span> <span class="pre">to</span> <span class="pre">write</span> <span class="pre">blacklist</span> <span class="pre">beside</span> <span class="pre">settings.ini</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">path_change()</span> <span class="pre">-</span> <span class="pre">call</span> <span class="pre">menu_path(),</span> <span class="pre">Change</span> <span class="pre">record</span> <span class="pre">parent</span> <span class="pre">path</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_menu.parent_record_path_change">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_menu.</span></span><span class="sig-name descname"><span class="pre">parent_record_path_change</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">)</span> <span class="pre">-</span> <span class="pre">store</span> <span class="pre">path</span> <span class="pre">in</span> <span class="pre">[GLOBAL],</span> <span class="pre">test</span> <span class="pre">if</span> <span class="pre">path</span> <span class="pre">is</span> <span class="pre">writeable,</span> <span class="pre">init</span> <span class="pre">GIni.global_config_get(</span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_menu.parent_record_path_change" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">path_validate_input(custom_path)</span> <span class="pre">-</span> <span class="pre">return</span> <span class="pre">True</span> <span class="pre">if</span> <span class="pre">path</span> <span class="pre">is</span> <span class="pre">valid</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">blacklist()</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">-</span> <span class="pre">Enable/disable</span> <span class="pre">blacklists</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">blacklist_is_enabled()</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">-</span> <span class="pre">Write</span> <span class="pre">a</span> <span class="pre">new</span> <span class="pre">blacklist</span> <span class="pre">option</span> <span class="pre">to</span> <span class="pre">settings.ini</span> <span class="pre">file</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">blacklist_on()</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">-</span> <span class="pre">write</span> <span class="pre">enabled</span> <span class="pre">to</span> <span class="pre">config</span> <span class="pre">file</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">blacklist_off()</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">-</span> <span class="pre">write</span> <span class="pre">disabled</span> <span class="pre">to</span> <span class="pre">config</span> <span class="pre">file</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">remove_special_chars(str_name)</span>&#160;&#160; <span class="pre">-</span> <span class="pre">clean</span> <span class="pre">radio</span> <span class="pre">name</span> <span class="pre">to</span> <span class="pre">create</span> <span class="pre">a</span> <span class="pre">folder</span></span></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_menu.blacklist">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_menu.</span></span><span class="sig-name descname"><span class="pre">blacklist</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_menu.blacklist" title="Permalink to this definition"></a></dt>
<dd><p>Enable/disable blacklists</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_menu.blacklist_is_enabled">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_menu.</span></span><span class="sig-name descname"><span class="pre">blacklist_is_enabled</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_menu.blacklist_is_enabled" title="Permalink to this definition"></a></dt>
<dd><p>Write a new blacklist option to settings.ini file</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_menu.blacklist_off">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_menu.</span></span><span class="sig-name descname"><span class="pre">blacklist_off</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_menu.blacklist_off" title="Permalink to this definition"></a></dt>
<dd><p>write disabled to config file</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_menu.blacklist_on">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_menu.</span></span><span class="sig-name descname"><span class="pre">blacklist_on</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_menu.blacklist_on" title="Permalink to this definition"></a></dt>
<dd><p>write enabled to config file</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_menu.config_path_change">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_menu.</span></span><span class="sig-name descname"><span class="pre">config_path_change</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_menu.config_path_change" title="Permalink to this definition"></a></dt>
<dd><p>change the path to settings.ini and blacklist.json
show old path, if any, write new one to GLOBAL section, create GLOBAL, if not exists
test if path is writeable
show new path, GIni.global_config_get()</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_menu.menu_blacklist">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_menu.</span></span><span class="sig-name descname"><span class="pre">menu_blacklist</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_menu.menu_blacklist" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_menu.menu_find_config">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_menu.</span></span><span class="sig-name descname"><span class="pre">menu_find_config</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_menu.menu_find_config" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_menu.menu_main">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_menu.</span></span><span class="sig-name descname"><span class="pre">menu_main</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_menu.menu_main" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_menu.menu_path">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_menu.</span></span><span class="sig-name descname"><span class="pre">menu_path</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_menu.menu_path" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id0">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_menu.</span></span><span class="sig-name descname"><span class="pre">parent_record_path_change</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id0" title="Permalink to this definition"></a></dt>
<dd><p>populate variables in GIni
show old path, if any, write new one to GLOBAL section, create GLOBAL, if not exists
test if path is writeable
show new path, GIni.global_config_get()
Exception</p>
<blockquote>
<div><p>we crash, if config file is not in path, writing will fail</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_menu.path_change">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_menu.</span></span><span class="sig-name descname"><span class="pre">path_change</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_menu.path_change" title="Permalink to this definition"></a></dt>
<dd><p>call menu_path(), Change record parent path</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_menu.path_validate_input">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_menu.</span></span><span class="sig-name descname"><span class="pre">path_validate_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">custom_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_menu.path_validate_input" title="Permalink to this definition"></a></dt>
<dd><p>return True if path is valid</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_menu.record">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_menu.</span></span><span class="sig-name descname"><span class="pre">record</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_menu.record" title="Permalink to this definition"></a></dt>
<dd><p>init all dicts in ghetto_ini.GIni, show the list of radios to choose from
Functions</p>
<blockquote>
<div><p>GIni.record_path_test()    - test if configparser can read file
GIni.global_config_get()   - test ok, show [GLOBAL] section of settings.ini config
GIni.show_items_ini_file() - show the main menu</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_menu.record_create_folder_radio_name">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_menu.</span></span><span class="sig-name descname"><span class="pre">record_create_folder_radio_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">radio_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_menu.record_create_folder_radio_name" title="Permalink to this definition"></a></dt>
<dd><p>create parent folder and radio child folder</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_menu.record_create_radio_url_dict">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_menu.</span></span><span class="sig-name descname"><span class="pre">record_create_radio_url_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">radio_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_menu.record_create_radio_url_dict" title="Permalink to this definition"></a></dt>
<dd><p>need radio name as thread and folder name, url to connect to network
clean the radio name from special chars to make folders</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_menu.record_read_radios">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_menu.</span></span><span class="sig-name descname"><span class="pre">record_read_radios</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_menu.record_read_radios" title="Permalink to this definition"></a></dt>
<dd><p>get radio name or the choice (index) number of a radio list,
validate name with list, if not it must be the choice number, else False
store all, also only one, selected radio name(s) in a list
remove special chars from radio name to create folders</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_menu.record_validate_input">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_menu.</span></span><span class="sig-name descname"><span class="pre">record_validate_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">radio_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_menu.record_validate_input" title="Permalink to this definition"></a></dt>
<dd><p>return True if choice in list, return True for choice if index of list is a valid integer
return False if not valid</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_menu.record_validate_radio_name">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_menu.</span></span><span class="sig-name descname"><span class="pre">record_validate_radio_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">radio_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_menu.record_validate_radio_name" title="Permalink to this definition"></a></dt>
<dd><p>change the index number back to radio name, if index was the choice</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_menu.remove_special_chars">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_menu.</span></span><span class="sig-name descname"><span class="pre">remove_special_chars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_menu.remove_special_chars" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_menu.terminal_record_all_radios_get">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_menu.</span></span><span class="sig-name descname"><span class="pre">terminal_record_all_radios_get</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_menu.terminal_record_all_radios_get" title="Permalink to this definition"></a></dt>
<dd><p>called by ghetto_recorder module to write blacklist beside settings.ini</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_menu.terminal_record_blacklist_enabled_get">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_menu.</span></span><span class="sig-name descname"><span class="pre">terminal_record_blacklist_enabled_get</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_menu.terminal_record_blacklist_enabled_get" title="Permalink to this definition"></a></dt>
<dd><p>called by ghetto_recorder module, enable api variable</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_menu.terminal_record_global_custom_path_get">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_menu.</span></span><span class="sig-name descname"><span class="pre">terminal_record_global_custom_path_get</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_menu.terminal_record_global_custom_path_get" title="Permalink to this definition"></a></dt>
<dd><p>called by ghetto_recorder module, config is called at radio choice in main menu</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_menu.terminal_record_radio_base_dir_get">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_menu.</span></span><span class="sig-name descname"><span class="pre">terminal_record_radio_base_dir_get</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_menu.terminal_record_radio_base_dir_get" title="Permalink to this definition"></a></dt>
<dd><p>return GIni.radio_base_dir</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_menu.terminal_record_settings_dir_get">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_menu.</span></span><span class="sig-name descname"><span class="pre">terminal_record_settings_dir_get</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_menu.terminal_record_settings_dir_get" title="Permalink to this definition"></a></dt>
<dd><p>called by ghetto_recorder module to write blacklist beside settings.ini</p>
</dd></dl>

</section>
<section id="module-eisenradio.lib.ghetto_meta">
<span id="eisenradio-lib-ghetto-meta-module"></span><h2>eisenradio.lib.ghetto_meta module<a class="headerlink" href="#module-eisenradio.lib.ghetto_meta" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_meta.GMeta">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_meta.</span></span><span class="sig-name descname"><span class="pre">GMeta</span></span><a class="headerlink" href="#eisenradio.lib.ghetto_meta.GMeta" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="simple">
<dt>Dictionaries:</dt><dd><p>ghetto_measure = {}     - header information dump and request time measure
ghettoApi.init_ghetto_measurements(ghetto_measure)
current_song_dict = {}  - each thread writes the new title to the station key name {station : title}
ghettoApi.init_current_song_dict(current_song_dict)</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">metadata_request(url)</span> <span class="pre">-</span> <span class="pre">pull</span> <span class="pre">the</span> <span class="pre">metadata</span> <span class="pre">by</span> <span class="pre">telling</span> <span class="pre">server</span> <span class="pre">{'Icy-MetaData'</span></span></dt>
<dd><p>‘1’}, get binary data content</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">metadata_header_info(request,</span> <span class="pre">str_radio,</span> <span class="pre">request_time)</span> <span class="pre">-</span> <span class="pre">fill</span> <span class="pre">dict</span> <span class="pre">with</span> <span class="pre">header</span> <span class="pre">information</span> <span class="pre">to</span> <span class="pre">display</span> <span class="pre">values</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">metadata_icy_info(request,</span> <span class="pre">str_radio)</span> <span class="pre">-</span> <span class="pre">return</span> <span class="pre">raw</span> <span class="pre">byte</span> <span class="pre">code</span> <span class="pre">metadata</span> <span class="pre">from</span> <span class="pre">radio</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">metadata_get_display_extract(icy_info)</span> <span class="pre">-</span> <span class="pre">return</span> <span class="pre">cleaned</span> <span class="pre">up</span> <span class="pre">metadata</span> <span class="pre">tile</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">metadata_get_display_info(icy_info)</span> <span class="pre">-</span> <span class="pre">extract</span> <span class="pre">readable</span> <span class="pre">title</span> <span class="pre">data</span> <span class="pre">to</span> <span class="pre">show</span> <span class="pre">it</span> <span class="pre">on</span> <span class="pre">html</span> <span class="pre">page</span></span></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_meta.GMeta.current_song_dict">
<span class="sig-name descname"><span class="pre">current_song_dict</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_meta.GMeta.current_song_dict" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_meta.GMeta.ghetto_measure">
<span class="sig-name descname"><span class="pre">ghetto_measure</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_meta.GMeta.ghetto_measure" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_meta.GMeta.metadata_get_display_extract">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">metadata_get_display_extract</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">icy_info</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_meta.GMeta.metadata_get_display_extract" title="Permalink to this definition"></a></dt>
<dd><p>return cleaned up metadata tile</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_meta.GMeta.metadata_get_display_info">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">metadata_get_display_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">icy_info</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_meta.GMeta.metadata_get_display_info" title="Permalink to this definition"></a></dt>
<dd><p>extract readable title data to show it on html page</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_meta.GMeta.metadata_header_info">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">metadata_header_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">str_radio</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request_time</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_meta.GMeta.metadata_header_info" title="Permalink to this definition"></a></dt>
<dd><p>fill dict with header information to display values/information about radio on html page
‘GRecorder.ghetto_measure[str_radio + ‘,request_time’]’</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_meta.GMeta.metadata_icy_info">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">metadata_icy_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">str_radio</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_meta.GMeta.metadata_icy_info" title="Permalink to this definition"></a></dt>
<dd><p>returns raw byte code metadata from radio</p>
<p>find start byte, convert to int, find out bytes to read, read block of bytes
return a byte code error message on unknown error</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_meta.GMeta.metadata_request">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">metadata_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_meta.GMeta.metadata_request" title="Permalink to this definition"></a></dt>
<dd><p>pull the metadata by telling server {‘Icy-MetaData’: ‘1’},
get binary data block with content</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_meta.GMeta.metadata_stream_get">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">metadata_stream_get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">str_radio</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_meta.GMeta.metadata_stream_get" title="Permalink to this definition"></a></dt>
<dd><p>return nothing, from request to clean current_song_dict, recorder “head” can build path with title now</p>
<p>measures time of response to show network access time
“metadata_header_info(response, str_radio, request_time)” - header info to show them on html page
“metadata_icy_info(response, str_radio)”                    - call extraction of current title
“metadata_get_display_info” - filters out title from unreliable and wrong metadata responses
“current_song_dict[str_radio]” - cleaned current title stored in dict for radio as value</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_meta.GMeta.remove_special_chars">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">remove_special_chars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_meta.GMeta.remove_special_chars" title="Permalink to this definition"></a></dt>
<dd><p>remove special characters for writing to file system</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-eisenradio.lib.ghetto_net">
<span id="eisenradio-lib-ghetto-net-module"></span><h2>eisenradio.lib.ghetto_net module<a class="headerlink" href="#module-eisenradio.lib.ghetto_net" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_net.GNet">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_net.</span></span><span class="sig-name descname"><span class="pre">GNet</span></span><a class="headerlink" href="#eisenradio.lib.ghetto_net.GNet" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>network test, content_type check
Dictionaries:</p>
<blockquote>
<div><p>dict_error = {}  : display connection errors
ghettoApi.init_ghetto_dict_error(dict_error)  : transfer information to api
content_type_dict = {}  : a thread that holds the http server instance informs that server about file type
bit_rate_dict = {} : bitrate from header, show that rate on startup for each radio beside the URL</p>
</div></blockquote>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">is_server_alive(url,</span> <span class="pre">str_radio)</span> <span class="pre">-</span> <span class="pre">filter</span> <span class="pre">out</span> <span class="pre">not</span> <span class="pre">responding</span> <span class="pre">server</span> <span class="pre">by</span> <span class="pre">calling</span> <span class="pre">'load_url(url)'</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">load_url(url)</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">-</span> <span class="pre">returns</span> <span class="pre">status</span> <span class="pre">200</span> <span class="pre">if</span> <span class="pre">alive</span> <span class="pre">and</span> <span class="pre">ok</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">stream_filetype_url(url,</span> <span class="pre">str_radio)</span> <span class="pre">-</span> <span class="pre">content-type</span> <span class="pre">for</span> <span class="pre">server</span> <span class="pre">is</span> <span class="pre">mapped</span> <span class="pre">to</span> <span class="pre">file</span> <span class="pre">suffix</span></span></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_net.GNet.bit_rate_dict">
<span class="sig-name descname"><span class="pre">bit_rate_dict</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_net.GNet.bit_rate_dict" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_net.GNet.bit_rate_url">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">bit_rate_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">str_radio</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_net.GNet.bit_rate_url" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_net.GNet.content_type_dict">
<span class="sig-name descname"><span class="pre">content_type_dict</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_net.GNet.content_type_dict" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_net.GNet.dict_error">
<span class="sig-name descname"><span class="pre">dict_error</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_net.GNet.dict_error" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_net.GNet.is_server_alive">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_server_alive</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">str_radio</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_net.GNet.is_server_alive" title="Permalink to this definition"></a></dt>
<dd><p>return True if server alive
don’t delete - urllib3 timeout=5, placebo, we have server up, but content not presented - zombie
now use for all connections urllib</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_net.GNet.load_url">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_net.GNet.load_url" title="Permalink to this definition"></a></dt>
<dd><p>returns status code 200 if ok, conn.getcode()
use urllib, urllib3 causes response to wait “forever”, timeout is not working on dead server</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_net.GNet.stream_filetype_url">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">stream_filetype_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">str_radio</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_net.GNet.stream_filetype_url" title="Permalink to this definition"></a></dt>
<dd><p>return file suffix of the stream mapped from content-type
GNet.content_type_dict[str_radio] stores the content-type, thread informs local http server which stream
not called if the server failed before</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-eisenradio.lib.ghetto_recorder">
<span id="eisenradio-lib-ghetto-recorder-module"></span><h2>eisenradio.lib.ghetto_recorder module<a class="headerlink" href="#module-eisenradio.lib.ghetto_recorder" title="Permalink to this heading"></a></h2>
<p>connections:
url is tested before the “real” connection to write error messages to a dict and html frontend</p>
<blockquote>
<div><p>content type, bitrate and playlist (some url may deliver only a playlist with real urls)</p>
</div></blockquote>
<p>for every connection (rec or listen) is a second connection opened to ask every few seconds for metadata, aka title
asking for metadata in one stream leads to blocks of metadata in the datastream; digital noise and audio jumps
if a listen connection is opened and recording is activated a second connection is opened
this is four connections in sum for the radio, two streams, two metadata
buttons:
button status is written to dicts in Python,
url requests:
use urllib with certify and ssl imports plus ssl.create_default_context(cafile=certifi.where())
to avoid ssl errors on android and mac</p>
<dl class="py class">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GBase">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_recorder.</span></span><span class="sig-name descname"><span class="pre">GBase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">radio_base_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">settings_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GBase" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>base class attributes and utils methods,
prefix &lt;<a href="#id2"><span class="problematic" id="id3">terminal_</span></a>&gt; is exclusively used for command line version (running ghetto_recorder.py)
.. attribute:: terminal_radio_list = []  # all radios in settings.ini</p>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">terminal_blacklist_name</span> <span class="pre">=</span> <span class="pre">&quot;blacklist.json&quot;</span> <span class="pre">-</span> <span class="pre">name</span> <span class="pre">blacklist</span></span></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">terminal_http_server_avail_flag</span> <span class="pre">=</span> <span class="pre">True</span>&#160; <span class="pre">-</span> <span class="pre">one</span> <span class="pre">thread</span> <span class="pre">may</span> <span class="pre">create</span> <span class="pre">the</span> <span class="pre">http</span> <span class="pre">server</span> <span class="pre">instance</span> <span class="pre">than</span> <span class="pre">switch</span> <span class="pre">off,</span> <span class="pre">False</span></span></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">terminal_http_server_thread_name</span> <span class="pre">=</span> <span class="pre">&quot;&quot;</span>&#160;&#160;&#160; <span class="pre">-</span> <span class="pre">name</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">thread</span> <span class="pre">that</span> <span class="pre">owns</span> <span class="pre">the</span> <span class="pre">terminal_http_server_avail_flag</span></span></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">terminal_run</span> <span class="pre">=</span> <span class="pre">False</span>&#160; <span class="pre">-</span> <span class="pre">thread</span> <span class="pre">can</span> <span class="pre">look</span> <span class="pre">if</span> <span class="pre">we</span> <span class="pre">run</span> <span class="pre">in</span> <span class="pre">a</span> <span class="pre">terminal</span> <span class="pre">window,</span> <span class="pre">set</span> <span class="pre">in</span> <span class="pre">&quot;terminal_main()&quot;</span></span></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">dict_exit</span> <span class="pre">=</span> <span class="pre">{}</span>&#160; <span class="pre">-</span> <span class="pre">radio</span> <span class="pre">listen,</span> <span class="pre">record,</span> <span class="pre">metadata</span> <span class="pre">threads</span> <span class="pre">stop,</span> <span class="pre">html</span> <span class="pre">timer</span> <span class="pre">can</span> <span class="pre">also</span> <span class="pre">call</span> <span class="pre">{goa</span></span></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>true,…}</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">radio_base_dir</span> <span class="pre">=</span> <span class="pre">&quot;&quot;</span>&#160; <span class="pre">-</span> <span class="pre">html,</span> <span class="pre">eishome.set_radio_path();</span> <span class="pre">terminal</span> <span class="pre">version</span> <span class="pre">set</span> <span class="pre">in</span> <span class="pre">ghetto_ini.py</span> <span class="pre">(circular</span> <span class="pre">import)</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">make_directory(path)</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">-</span> <span class="pre">make</span> <span class="pre">parent</span> <span class="pre">and</span> <span class="pre">subdirectories</span> <span class="pre">at</span> <span class="pre">once</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">remove_special_chars(str_name)</span>&#160; <span class="pre">-</span> <span class="pre">remove</span> <span class="pre">special</span> <span class="pre">characters</span> <span class="pre">for</span> <span class="pre">writing</span> <span class="pre">to</span> <span class="pre">file</span> <span class="pre">system</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">this_time()</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">-</span> <span class="pre">mark</span> <span class="pre">a</span> <span class="pre">recorded</span> <span class="pre">title</span> <span class="pre">if</span> <span class="pre">no</span> <span class="pre">metadata</span> <span class="pre">are</span> <span class="pre">available</span></span></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GBase.dict_exit">
<span class="sig-name descname"><span class="pre">dict_exit</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GBase.dict_exit" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GBase.make_directory">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">make_directory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GBase.make_directory" title="Permalink to this definition"></a></dt>
<dd><p>make parent and subdirectories at once</p>
<p>make write error public</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GBase.radio_base_dir">
<span class="sig-name descname"><span class="pre">radio_base_dir</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GBase.radio_base_dir" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GBase.remove_special_chars">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">remove_special_chars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GBase.remove_special_chars" title="Permalink to this definition"></a></dt>
<dd><p>remove special characters for writing to file system</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GBase.terminal_blacklist_name">
<span class="sig-name descname"><span class="pre">terminal_blacklist_name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'blacklist.json'</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GBase.terminal_blacklist_name" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GBase.terminal_http_server_avail_flag">
<span class="sig-name descname"><span class="pre">terminal_http_server_avail_flag</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GBase.terminal_http_server_avail_flag" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GBase.terminal_http_server_thread_name">
<span class="sig-name descname"><span class="pre">terminal_http_server_thread_name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GBase.terminal_http_server_thread_name" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GBase.terminal_radio_list">
<span class="sig-name descname"><span class="pre">terminal_radio_list</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[]</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GBase.terminal_radio_list" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GBase.terminal_run">
<span class="sig-name descname"><span class="pre">terminal_run</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GBase.terminal_run" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GBase.this_time">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">this_time</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GBase.this_time" title="Permalink to this definition"></a></dt>
<dd><p>mark a recorded title if no metadata are available</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_recorder.</span></span><span class="sig-name descname"><span class="pre">GRecorder</span></span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>recorder
Dictionaries:</p>
<blockquote>
<div><p>path_record_dict = {}    - {radio : //home//box/Download//hr3//Mittelstandskinder ohne Strom - kalt [Rmx]}
start_write_command = {} - recorder head thread set command to start recording
record_active_dict = {}  - button press true/false record / command line version writes also here
listen_active_dict = {}  - button press true/false listen
ghettoApi.init_ghetto_listen_active_dict(listen_active_dict) - transfer dict to api
audio_stream_queue_dict = {} - chunks of data written to a radio key as value {radioB2: queue.Queue}
# each radio has {key:val}; means {goa _audio: queue.Queue(maxsize=5), goa _audio_2: queue.Queue(maxsize=5)}
# for later use if multiple streams from same radio server are loaded, needs interaction with naming the files
ghettoApi.init_ghetto_audio_stream(audio_stream_queue_dict)
recorder_new_title_dict = {}  - recorder splits path to get the clean title to compare with blacklist
ghettoApi.init_ghetto_recorder_new_title(recorder_new_title_dict)
skipped_in_session_dict = {}  - blacklist feature for html, shows skipped titles during recording session
ghettoApi.init_ghetto_skipped_in_session_dict(skipped_in_session_dict)</p>
</div></blockquote>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">move</span> <span class="pre">to</span> <span class="pre">external</span> <span class="pre">module?</span> <span class="pre">=</span> <span class="pre">m;</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">g_recorder_head(...)</span> <span class="pre">-</span> <span class="pre">thread</span> <span class="pre">loop,</span> <span class="pre">clean</span> <span class="pre">metadata</span> <span class="pre">from</span> <span class="pre">problematic</span> <span class="pre">chars,</span> <span class="pre">create</span> <span class="pre">file</span> <span class="pre">name</span> <span class="pre">and</span> <span class="pre">path</span> <span class="pre">for</span> <span class="pre">&quot;tail&quot;</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">g_recorder_await_head(str_radio)</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">-</span> <span class="pre">g_recorder_tail()</span> <span class="pre">must</span> <span class="pre">wait</span> <span class="pre">to</span> <span class="pre">get</span> <span class="pre">first</span> <span class="pre">path/file</span> <span class="pre">name</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">g_recorder_path_transfer_test(str_radio)</span> <span class="pre">-</span> <span class="pre">return</span> <span class="pre">if</span> <span class="pre">no</span> <span class="pre">valid</span> <span class="pre">path</span> <span class="pre">can</span> <span class="pre">be</span> <span class="pre">presented</span> <span class="pre">by</span> <span class="pre">'g_recorder_await_head()'</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_cache_the_file">
<span class="sig-name descname"><span class="pre">g_recorder_cache_the_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str_radio</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">record_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ghetto_recorder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream_request_size</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_cache_the_file" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">g_recorder_reset_file_offset(record_file)</span> <span class="pre">-</span> <span class="pre">seek(0)</span> <span class="pre">and</span> <span class="pre">truncate</span> <span class="pre">recorder</span> <span class="pre">file</span> <span class="pre">to</span> <span class="pre">start</span> <span class="pre">new</span> <span class="pre">record</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">g_recorder_copy_file(full_file_path,</span> <span class="pre">ghetto_recorder,</span> <span class="pre">stream_request_size)</span> <span class="pre">-</span> <span class="pre">copy</span> <span class="pre">new</span> <span class="pre">recorded</span> <span class="pre">file</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">g_recorder_remove_file(full_file_path,</span> <span class="pre">record_file)</span> <span class="pre">-</span> <span class="pre">del</span> <span class="pre">old</span> <span class="pre">if</span> <span class="pre">new</span> <span class="pre">file</span> <span class="pre">must</span> <span class="pre">be</span> <span class="pre">copied,</span> <span class="pre">no</span> <span class="pre">blacklist</span> <span class="pre">active</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">g_recorder_record_trace(str_radio,</span> <span class="pre">full_file_path)</span> <span class="pre">-</span> <span class="pre">extract</span> <span class="pre">title</span> <span class="pre">from</span> <span class="pre">path,</span> <span class="pre">add</span> <span class="pre">to</span> <span class="pre">recorder_new_title_dict</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">g_recorder_teardown(...)</span> <span class="pre">-</span> <span class="pre">close</span> <span class="pre">the</span> <span class="pre">recorder</span> <span class="pre">file</span> <span class="pre">and</span> <span class="pre">reset</span> <span class="pre">it</span> <span class="pre">to</span> <span class="pre">not</span> <span class="pre">abandon</span> <span class="pre">100mb</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">g_recorder_empty_queue(str_radio)</span> <span class="pre">-</span> <span class="pre">drain</span> <span class="pre">Html</span> <span class="pre">audio</span> <span class="pre">element,</span> <span class="pre">it</span> <span class="pre">will</span> <span class="pre">switch</span> <span class="pre">faster</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">g_recorder_write_queue(str_radio,</span> <span class="pre">chunk)</span> <span class="pre">-</span> <span class="pre">listen</span> <span class="pre">endpoint</span> <span class="pre">queue,</span> <span class="pre">empty</span> <span class="pre">the</span> <span class="pre">Queue</span> <span class="pre">if</span> <span class="pre">full</span> <span class="pre">and</span> <span class="pre">write</span> <span class="pre">new</span></span></dt>
<dd><p>m g_recorder_ask_bit_rate(url) - return bitrate from header
m urllib.request.urlopen(url, timeout=15, context=context_ssl) - only for requesting the bitrate
m g_recorder_calc_chunk_size(url) - return bitrate from header info of radio to adapt buffer size</p>
<blockquote>
<div><p>http_srv_object_create(str_radio) - return instance of ‘TerminalRequestHandler’, create a mini http server
g_recorder_rec(…) - recorder loop return nothing
record_write_first(chunk, record_file, suffix) - return first cleaned aac chunk after a title change
record_write_last(chunk, record_file, suffix) - have to fix aac file end (clean cut) so title not stuck</p>
</div></blockquote>
<p>m record_acp_fff1_sync_word_tail(chunk) - aac repair clean cut at the end
m record_acp_fff1_sync_word_header(chunk) - aac repair
m g_recorder_request(url) - return the request object of the url, or False</p>
<blockquote>
<div><p>g_recorder_tail(…) - thread, dispatch record and listen action
metadata_main(url, str_radio, str_action, str_type) - main function for metadata, title extract</p>
</div></blockquote>
<dl class="simple">
<dt>m playlist_m3u(str_radio, str_url) - return the first server of the playlist</dt><dd><p>record_start_radio(…) - start threads for one radio daemon style, assign names for debugging
record(str_radio, url, str_action) - return nothing, prepare environment for start of radio threads and start
terminal_feed_record(radio_dict) - return nothing, start recording all radios that passed the online test
resolve_playlist(str_radio, str_url) - return first url from a playlist ‘GRecorder.playlist_m3u(str_radio, …)’
is_radio_online(str_radio, str_url) - return url if asked url was a play list, returns False if normal server
terminal_main_thread_loop() - loop keeps main thread alive, killed via ‘signal_handler()’ strg+c
terminal_custom_record_path_get() - return parent record dir if custom path is set, take it, else default
terminal_test_record_server(str_radio, str_url) - return radio url, return nothing if offline
terminal_remove_offline_radios(radio_terminal_dict) - delete offline radios from dict of desired radios
terminal_write_blacklist(bl_path, bl_name) - write blacklist if not exists, else update it with new radio names
terminal_populate_new_blacklist(path) - return True if first time populate the blacklist with empty lists
terminal_update_blacklist(path) - return True if update existing blacklist json, read, load in dict
terminal_blacklist_enable(blacklist_name) - prepare env for blacklist writer module to start and work easily</p>
</dd>
</dl>
<p>m signal_handler(sig, frame) - Terminal: catch Keyboard Interrupt ctrl + c, “signal.signal()” instances listen</p>
</dd></dl>

<p>need to make more use of ghettoApi to get this guy smaller and more readable; perhaps split api</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.audio_stream_queue_dict">
<span class="sig-name descname"><span class="pre">audio_stream_queue_dict</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.audio_stream_queue_dict" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_ask_bit_rate">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">g_recorder_ask_bit_rate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_ask_bit_rate" title="Permalink to this definition"></a></dt>
<dd><p>return bitrate from header
Method:</p>
<blockquote>
<div><p>urllib.request.urlopen(url, timeout=15, context=context_ssl) - only for requesting the bitrate</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>correct mis configured values</strong> – </p></li>
<li><p><strong>if all goes wrong</strong><strong>, </strong><strong>return a predefined value</strong> – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_await_head">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">g_recorder_await_head</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str_radio</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_await_head" title="Permalink to this definition"></a></dt>
<dd><p>recorder tail must wait to get file, path name from recorder head function</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id1">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">g_recorder_cache_the_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str_radio</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">record_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ghetto_recorder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream_request_size</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id1" title="Permalink to this definition"></a></dt>
<dd><p>recorder write to disk function
blacklist enabled:</p>
<blockquote>
<div><p>skip writing, if title found in blacklist</p>
</div></blockquote>
<dl class="simple">
<dt>no blacklist:</dt><dd><p>delete file and write new, if exists</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_calc_chunk_size">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">g_recorder_calc_chunk_size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_calc_chunk_size" title="Permalink to this definition"></a></dt>
<dd><p>return bitrate from header info of radio to adapt buffer size</p>
<p>avoid digital noise, delays and connection breaks
buffer too small introduces stops, buffer too big endless delay on radio connect (fill buffer)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_copy_file">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">g_recorder_copy_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">full_file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ghetto_recorder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream_request_size</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_copy_file" title="Permalink to this definition"></a></dt>
<dd><p>copy recorder file to user file if file is bigger than one chunk of radio stream
:raises OSError on disk fail or folder not writeable:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_empty_queue">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">g_recorder_empty_queue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str_radio</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_empty_queue" title="Permalink to this definition"></a></dt>
<dd><p>try draining the Html audio element, it will switch faster, I guess, I wish ;)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_head">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">g_recorder_head</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory_save</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream_suffix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">str_radio</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">str_action</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_head" title="Permalink to this definition"></a></dt>
<dd><p>return nothing, loop
clean metadata from problematic characters for writing to file system, hopefully caught all
create file name and path from current metadata for recorder (tail)
create _incomplete string to mark first and last incomplete file</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_path_transfer_test">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">g_recorder_path_transfer_test</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str_radio</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_path_transfer_test" title="Permalink to this definition"></a></dt>
<dd><p>called by recorder tail, recorder head function put path in dict, if path is not there for key, exit
:raises inform user on html, error occurred:
:raises kill all radio threads to not introduce strange behaviour:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_rec">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">g_recorder_rec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">str_radio</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ghetto_recorder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream_chunk_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffix</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_rec" title="Permalink to this definition"></a></dt>
<dd><p>recorder loop return nothing</p>
<p>must recognize change in metadata to work on header and tail of aac file datastructure, is cut out of the stream
Functions
———
handler_http_srv_object - “try” to create an instance of GRecorder.http_srv_object_create(str_radio)</p>
<blockquote>
<div><p>GRecorder.record_write_last            - last chunk of title must be cleaned if aac file
GRecorder.g_recorder_cache_the_file    - store the concatenated chunks since last title change, copy
GRecorder.g_recorder_reset_file_offset - cleanup of recorder file, reset seek(), file to zero bytes
full_file_path = GRecorder.path_record_dict[str_radio] - set new file path to copy title (file name)</p>
<blockquote>
<div><p>new_chunk = request.read(stream_chunk_size) - store the current chunk in var to copy to recorder and http
record_file.write(new_chunk)                                 - write to recorder file
handler_http_srv_object.fifo_http_chunk_queue.put(new_chunk) - feed http server buffer</p>
<dl class="simple">
<dt>GRecorder.g_recorder_teardown(str_radio, record_file, ghetto_recorder)</dt><dd><p>clean up, mark and copy incomplete file, reset recorder file to zero</p>
</dd>
</dl>
<p>Network errors occurred in reality,
prepare for temporary local network card failure
write message to analyze</p>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_record_trace">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">g_recorder_record_trace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str_radio</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_file_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_record_trace" title="Permalink to this definition"></a></dt>
<dd><p>extract the clean file name (path build in recorder ‘head’) from path string,</p>
<p>remove file extension (.suffix), keep name
add to recorder_new_title_dict[radio], blacklist writer can compare existing titles with this one</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_remove_file">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">g_recorder_remove_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">full_file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">record_file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_remove_file" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_request">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">g_recorder_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_request" title="Permalink to this definition"></a></dt>
<dd><p>” return the request object of the url, or False
url was tested in Gnet with “urllib” and context (SSL) manager
Exception
———
this is the main request to ‘dock’ to the radio server
we want to know why and when the connection was broken</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_reset_file_offset">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">g_recorder_reset_file_offset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record_file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_reset_file_offset" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_tail">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">g_recorder_tail</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">str_radio</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path_to_save</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">str_action</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_tail" title="Permalink to this definition"></a></dt>
<dd><p>return nothing,  dispatch record and listen action
Functions
———</p>
<blockquote>
<div><p>GRecorder.g_recorder_request(url) - open the radio data connection and return the response object
record
——</p>
<blockquote>
<div><p>GRecorder.g_recorder_await_head(str_radio)          - rec head function gives start for rec tail, this
GRecorder.g_recorder_path_transfer_test(str_radio)  - exit if head can not get a valid path, fail
GRecorder.g_recorder_rec(… )                      - call the recorder and present the response object</p>
</div></blockquote>
<blockquote>
<div><p>loop
GRecorder.g_recorder_write_queue(…) - feed the buffer dictionary for html audio element endpoints
break
—–</p>
<blockquote>
<div><p>GRecorder.g_recorder_empty_queue(str_radio) - remove all buffer from queue to drain audio element</p>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_teardown">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">g_recorder_teardown</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str_radio</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">record_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ghetto_recorder</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_teardown" title="Permalink to this definition"></a></dt>
<dd><p>return nothing, try a graceful copy, mark files incomplete
low level file action to close the recorder file and reset it, to not abandon 100mb</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>str_radio</strong> – radio name</p></li>
<li><p><strong>ghetto_recorder</strong> – name of the recorder file in OS syntax, needed in if clause to copy to physical path</p></li>
<li><p><strong>record_file</strong> – alias of with statement for writing to recorder file</p></li>
</ul>
</dd>
</dl>
<p>OSError on disk fail or folder not writeable</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_write_queue">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">g_recorder_write_queue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str_radio</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunk</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.g_recorder_write_queue" title="Permalink to this definition"></a></dt>
<dd><p>empty the Queue if full and write</p>
<p>queue runs full if browser leaves page and html audio element no longer pulls audio chunks
less digital noise on reconnect</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.http_srv_object_create">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">http_srv_object_create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str_radio</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.http_srv_object_create" title="Permalink to this definition"></a></dt>
<dd><p>return instance of ‘TerminalRequestHandler’, create a mini http server
only in command line mode</p>
<p>grab the instance and set GBase.terminal_http_server_avail_flag = False
GBase.terminal_run = False  recorder thread can look if we run in a terminal window
all threads try to capture the flag, winner should be the first radio selected in menu</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.listen_active_dict">
<span class="sig-name descname"><span class="pre">listen_active_dict</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.listen_active_dict" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.metadata_main">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">metadata_main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">str_radio</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">str_action</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.metadata_main" title="Permalink to this definition"></a></dt>
<dd><p>return nothing, main function for metadata, title extraction</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.path_record_dict">
<span class="sig-name descname"><span class="pre">path_record_dict</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.path_record_dict" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.playlist_m3u">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">playlist_m3u</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str_radio</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">str_url</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.playlist_m3u" title="Permalink to this definition"></a></dt>
<dd><p>return the first server of the playlist
:raises we want to know why and when the connection was broken:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.record_acp_fff1_sync_word_header">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">record_acp_fff1_sync_word_header</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">chunk</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.record_acp_fff1_sync_word_header" title="Permalink to this definition"></a></dt>
<dd><p>cut files out of the stream on metadata change, so the end of a file is not likely the correct start for new</p>
<p>search aacp (acp plus) frame start sequence to clean the file so browser do not stop with silent error
convert byte stream to hex, search ff f1 index_of_chunk[0] to index_of_chunk[4]
shift the search frame in hex to right, cut out from start and return as bytes
Exception
———
error occurred in Tail, but be prepared
real world error occurred (ValueError: non-hexadecimal number found in fromhex() arg at position 64805)
work against it, to not break the flow</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.record_acp_fff1_sync_word_tail">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">record_acp_fff1_sync_word_tail</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">chunk</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.record_acp_fff1_sync_word_tail" title="Permalink to this definition"></a></dt>
<dd><p>clean cut at the end, cut out the last bytes starting with ff f1 (if not, result is a defective payload),</p>
<p>so browser do not stop with silent error and will play next file
Exception
———
real world error occurred (ValueError: non-hexadecimal number found in fromhex() arg at position 64805)
work against it, to not break the flow</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.record_active_dict">
<span class="sig-name descname"><span class="pre">record_active_dict</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.record_active_dict" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.record_write_first">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">record_write_first</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">chunk</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">record_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffix</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.record_write_first" title="Permalink to this definition"></a></dt>
<dd><p>return first head cleaned aac chunk after a title change, else first dirty normal chunk</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.record_write_last">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">record_write_last</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">chunk</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">record_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffix</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.record_write_last" title="Permalink to this definition"></a></dt>
<dd><p>have to fix aac file end (clean cut) so title not stuck in a playlist</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.recorder_new_title_dict">
<span class="sig-name descname"><span class="pre">recorder_new_title_dict</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.recorder_new_title_dict" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.skipped_in_session_dict">
<span class="sig-name descname"><span class="pre">skipped_in_session_dict</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.skipped_in_session_dict" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.GRecorder.start_write_command">
<span class="sig-name descname"><span class="pre">start_write_command</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.GRecorder.start_write_command" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.is_radio_online">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_recorder.</span></span><span class="sig-name descname"><span class="pre">is_radio_online</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str_radio</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">str_url</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.is_radio_online" title="Permalink to this definition"></a></dt>
<dd><p>return url, if input url was a play list; return False if server offline, <a class="reference external" href="https://streams.br.de/bayern1obb_2.m3u">https://streams.br.de/bayern1obb_2.m3u</a></p>
<p>delete errors from dict to write new if any
GNet.is_server_alive() writes in error dict “GNet.dict_error[str_radio]” if server fails
called by eishome.dispatch_record_is_alive</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.record">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_recorder.</span></span><span class="sig-name descname"><span class="pre">record</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str_radio</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">str_action</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.record" title="Permalink to this definition"></a></dt>
<dd><p>return nothing, prepare environment for start of radio threads and start ‘em</p>
<p>server was tested alive, but network errors are common
.. method:: GNet.stream_filetype_url(url, str_radio) - return file type of stream, exit the radio on error</p>
<blockquote>
<div><p>GRecorder.current_song_dict[str_radio]       - rec, “unknown_title” first file name; listen, “” first title
GRecorder.start_write_command[str_radio]     - if recorder “head” is ready set True
GRecorder.skipped_in_session_dict[str_radio] - skipped titles during session for EisenRadio html info
GBase.dict_exit[str_radio]                   - True for thread exit its loop</p>
<p>a radio changed the endpoint, responded ok but without content-type, no problem
next radio send bool value, raised TypeError
do a clean exit</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.record_start_radio">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_recorder.</span></span><span class="sig-name descname"><span class="pre">record_start_radio</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str_radio</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream_suffix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dir_save</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">str_action</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.record_start_radio" title="Permalink to this definition"></a></dt>
<dd><p>return nothing, start threads for one radio daemon style, assign names for debugging
if listen action, thread for “head” will exit on first run, not needed</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.resolve_playlist">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_recorder.</span></span><span class="sig-name descname"><span class="pre">resolve_playlist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str_radio</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">str_url</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.resolve_playlist" title="Permalink to this definition"></a></dt>
<dd><p>return first url from a playlist ‘GRecorder.playlist_m3u(str_radio, str_url)’</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.signal_handler">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_recorder.</span></span><span class="sig-name descname"><span class="pre">signal_handler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frame</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.signal_handler" title="Permalink to this definition"></a></dt>
<dd><p>Terminal: catch Keyboard Interrupt ctrl + c, “signal.signal()” instances listen
fill the exit dict for the threads to end their loops itself (they look all few sec in this dict)
GBase.dict_exit[str_radio]
GRecorder.record_active_dict[radio]</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.terminal_blacklist_enable">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_recorder.</span></span><span class="sig-name descname"><span class="pre">terminal_blacklist_enable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">blacklist_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.terminal_blacklist_enable" title="Permalink to this definition"></a></dt>
<dd><p>prepare env for blacklist writer module to start and work easily</p>
<p>get directory of config file to put blacklist in the same directory
call to write a new or update an existing blacklist with radios from config file
loads the reader json string from written file into the blacklist dictionary
writes the blacklist file name to the api, blacklist writer can update file
starts the blacklist writer daemon</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.terminal_custom_record_path_get">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_recorder.</span></span><span class="sig-name descname"><span class="pre">terminal_custom_record_path_get</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.terminal_custom_record_path_get" title="Permalink to this definition"></a></dt>
<dd><p>return a path for parent record dir
If a custom path is set take it, else use default path</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.terminal_feed_record">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_recorder.</span></span><span class="sig-name descname"><span class="pre">terminal_feed_record</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">radio_dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.terminal_feed_record" title="Permalink to this definition"></a></dt>
<dd><p>return nothing, start recording all radios that passed the online test</p>
<p>GRecorder.record_active_dict[str_radio] = True, Eisenradio package write recorder button down, so we do
GRecorder.record_active_dict[str_radio] = False, recorder use it as one of the termination events
call record(str_radio, str_url, “record”) with “record” action, Eisenradio uses also “listen” action</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.terminal_main">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_recorder.</span></span><span class="sig-name descname"><span class="pre">terminal_main</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.terminal_main" title="Permalink to this definition"></a></dt>
<dd><p>terminal version (GhettoRecorder package) with a menu, settings.ini and blacklist, no database
functions for command line start with &lt;<a href="#id4"><span class="problematic" id="id5">terminal_</span></a>&gt;</p>
<p>ghetto_blacklist.py - blacklist writer updates json file and ghettoApi for recorder to find old titles’
ghetto_container.py - prepare for user interaction in container env
ghetto_help.py      - ?, want to push all help to “readthedocs” website
ghetto_ini.py       - reads, updates sections ([GLOBAL]) in settings.ini config file
ghetto_menu.py      - display config file content, calls ghetto_ini to update settings for path and blacklist
ghetto_recorder.py  - main module, GBase.radio_base_dir pulled from ghetto_ini to avoid circular import
ghettoApi           - reuse methods of Eisenradio to avoid import problems, push blacklist name …, __init__.py
settings.ini        - configuration file</p>
<p>the Python package is already deployed in a docker or snap container, prepare for user interaction</p>
<p>metadata thread extracts titles in intervals,
head, cleans’ metadata, adds timestamp if no metadata, provides the full path, gives recorder start command,
tail, recorder feeds http server, cleans aac/aacp segments and writes stream segments as a file</p>
<p>Name, “blacklist.json”, a json dictionary
“ghettoApi.all_blacklists_dict[str_radio]” - update_radios_blacklists()” feeds api with the blacklist for each radio
“ghettoApi.blacklist_enabled_global” - blacklist_enabled, is set in terminal_main(), if set recorder refuses to copy</p>
<p>Recorder “g_recorder_cache_the_file()” (copy file, reset seek recorder file) looks if blacklist feature is enabled
“ghettoApi.blacklist_enabled_global”
then it looks if title is not in its blacklist
“ghettoApi.all_blacklists_dict[str_radio]” {‘goa_psy’: [‘_incomplete_Midi Rico - Explosions Wackier animaskntru’],}</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.terminal_main_thread_loop">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_recorder.</span></span><span class="sig-name descname"><span class="pre">terminal_main_thread_loop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.terminal_main_thread_loop" title="Permalink to this definition"></a></dt>
<dd><p>loop keeps main thread alive, killed via ‘signal_handler()’ strg+c</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.terminal_populate_new_blacklist">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_recorder.</span></span><span class="sig-name descname"><span class="pre">terminal_populate_new_blacklist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.terminal_populate_new_blacklist" title="Permalink to this definition"></a></dt>
<dd><p>return True if first time populate the blacklist with empty lists
add new radios to the list, if list already exists</p>
<p>make write error public</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.terminal_remove_offline_radios">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_recorder.</span></span><span class="sig-name descname"><span class="pre">terminal_remove_offline_radios</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">radio_terminal_dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.terminal_remove_offline_radios" title="Permalink to this definition"></a></dt>
<dd><p>return nothing, delete offline radios from dict of desired radios</p>
<dl class="simple">
<dt>prepare lists as arguments for map()</dt><dd><p>threaded execution with argument list in correct order,
execution time is only dependent on max timeout of request, if timeout is 15, the list needs 15s to return +-</p>
</dd>
</dl>
<p>the argument dict may contain playlist urls, which must be resolved to one normal url
“url_online_list” contains only resolved urls, update the argument dict with those
delete key:value pairs from argument dict where “None” (radio offline) is found in url_online_list</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.terminal_test_record_server">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_recorder.</span></span><span class="sig-name descname"><span class="pre">terminal_test_record_server</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str_radio</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">str_url</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.terminal_test_record_server" title="Permalink to this definition"></a></dt>
<dd><p>return radio url, return nothing if offline
input url is playlist, download file and convert url to first playlist url
a True returns always a normal url</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.terminal_update_blacklist">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_recorder.</span></span><span class="sig-name descname"><span class="pre">terminal_update_blacklist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.terminal_update_blacklist" title="Permalink to this definition"></a></dt>
<dd><p>return True if update existing blacklist json
read, load in dict, compare with actual settings.ini,
update loaded dict, write dict</p>
<p>make write error public</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.ghetto_recorder.terminal_write_blacklist">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.ghetto_recorder.</span></span><span class="sig-name descname"><span class="pre">terminal_write_blacklist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bl_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bl_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.ghetto_recorder.terminal_write_blacklist" title="Permalink to this definition"></a></dt>
<dd><p>return True on success,
write blacklist if not exists, else update it with new radio names</p>
</dd></dl>

</section>
<section id="module-eisenradio.lib.platform_helper">
<span id="eisenradio-lib-platform-helper-module"></span><h2>eisenradio.lib.platform_helper module<a class="headerlink" href="#module-eisenradio.lib.platform_helper" title="Permalink to this heading"></a></h2>
<p>helper for flask to open or not open a browser window
display information about system for Snap user to avoid black box feeling</p>
<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.platform_helper.get_env_docker">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.platform_helper.</span></span><span class="sig-name descname"><span class="pre">get_env_docker</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.platform_helper.get_env_docker" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.platform_helper.get_env_snap">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.platform_helper.</span></span><span class="sig-name descname"><span class="pre">get_env_snap</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.platform_helper.get_env_snap" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.platform_helper.main">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.platform_helper.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.platform_helper.main" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="eisenradio.lib.platform_helper.open_browser">
<span class="sig-prename descclassname"><span class="pre">eisenradio.lib.platform_helper.</span></span><span class="sig-name descname"><span class="pre">open_browser</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#eisenradio.lib.platform_helper.open_browser" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="module-eisenradio.lib">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-eisenradio.lib" title="Permalink to this heading"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, René Horn.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>